# ‚è±Ô∏è Hotfix: OZON Performance API v2.1.3-polling-timeout-fix

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è v2.1.2 –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:

```json
{
  "error": "Report polling failed",
  "details": "Timeout after 10 attempts",
  "uuid": "0f6db8f9-b71c-4759-93c3-a3a34d6e6ff0"
}
```

**–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (boot error –∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
- ‚úÖ Integer —Ç–∏–ø—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (v2.1.2 fix —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚ùå **–¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç—á—ë—Ç–∞ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –¥–ª—è 30+ –∫–∞–º–ø–∞–Ω–∏–π**

## –ü—Ä–∏—á–∏–Ω–∞

**OZON API —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:**
1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –æ—Ç—á—ë—Ç ‚Üí –ø–æ–ª—É—á–∞–µ–º UUID
2. Polling (–æ–ø—Ä–æ—Å) —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç—á—ë—Ç–∞ –ø–æ UUID
3. –ö–æ–≥–¥–∞ status = "OK" ‚Üí —Å–∫–∞—á–∏–≤–∞–µ–º –æ—Ç—á—ë—Ç

**–°—Ç–∞—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã polling (v2.1.2):**
- –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫: **10**
- –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: **5 —Å–µ–∫—É–Ω–¥**
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: **3 —Å–µ–∫—É–Ω–¥—ã**
- **–û–±—â–∏–π —Ç–∞–π–º–∞—É—Ç: 5s + (10 √ó 3s) = 35 —Å–µ–∫—É–Ω–¥** ‚è±Ô∏è

**–ü—Ä–æ–±–ª–µ–º–∞:**
35 —Å–µ–∫—É–Ω–¥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞ –ø–æ 30+ –∫–∞–º–ø–∞–Ω–∏—è–º!

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–§–∞–π–ª:** `supabase/functions/sync-ozon-performance/index.ts`

**–°—Ç—Ä–æ–∫–∏ 66-68:**
```typescript
// –î–æ (v2.1.2):
async function pollReportStatus(
  uuid: string,
  accessToken: string,
  maxAttempts: number = 10,      // ‚ùå –°–ª–∏—à–∫–æ–º –º–∞–ª–æ
  initialDelay: number = 5000,   // ‚ùå –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
  pollInterval: number = 3000    // ‚ùå –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
)

// –ü–æ—Å–ª–µ (v2.1.3):
async function pollReportStatus(
  uuid: string,
  accessToken: string,
  maxAttempts: number = 40,      // ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç—á—ë—Ç–æ–≤
  initialDelay: number = 10000,  // ‚úÖ OZON –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  pollInterval: number = 5000    // ‚úÖ –†–∞–∑—É–º–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞
)
```

**–ù–æ–≤—ã–π —Ç–∞–π–º–∞—É—Ç:**
```
10s + (40 √ó 5s) = 210 —Å–µ–∫—É–Ω–¥ = 3.5 –º–∏–Ω—É—Ç—ã
```

**–í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:**
- Version: `2.1.3-polling-timeout-fix`
- Build date: `2025-12-18`

---

## üöÄ –î–µ–ø–ª–æ–π

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard

```
https://supabase.com/dashboard/project/nxymhkyvhcfcwjcfcbfy/functions/sync-ozon-performance
```

### –®–∞–≥ 2: –ó–∞–º–µ–Ω–∏—Ç–µ –∫–æ–¥

**–ò—Å—Ç–æ—á–Ω–∏–∫:**
```
https://github.com/Alex1604788/standalone-spark/blob/claude/ozon-performance-zip-support-hN0XE/supabase/functions/sync-ozon-performance/index.ts
```

**–ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª:**
```
/home/user/standalone-spark/supabase/functions/sync-ozon-performance/index.ts
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤–µ—Å—å –∫–æ–¥** –∏–∑ —Ñ–∞–π–ª–∞
2. –í—Å—Ç–∞–≤—å—Ç–µ –≤ Supabase Editor (–∑–∞–º–µ–Ω–∏–≤ —Å—Ç–∞—Ä—ã–π –∫–æ–¥)
3. –ù–∞–∂–º–∏—Ç–µ **Deploy**

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏

### –°—Ç—Ä–æ–∫–∞ 3 –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```typescript
 * Version: 2.1.3-polling-timeout-fix
```

### –°—Ç—Ä–æ–∫–∏ 66-68 –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```typescript
  maxAttempts: number = 40,      // Increased from 10 to 40 for large reports (30+ campaigns)
  initialDelay: number = 10000,  // Increased from 5s to 10s - OZON needs time to start processing
  pollInterval: number = 5000    // Increased from 3s to 5s - total timeout ~3.5 minutes
```

### –°—Ç—Ä–æ–∫–∞ 528-529 –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```typescript
// Polling –æ—Ç—á–µ—Ç–∞ (uses default params: 40 attempts, 10s initial delay, 5s interval)
const pollResult = await pollReportStatus(uuid, accessToken);
```

**–ù–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨:**
```typescript
// ‚ùå –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è v2.1.2
const pollResult = await pollReportStatus(uuid, accessToken, 10, 5000, 3000);
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API OZON
2. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"**
3. –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:

```json
{
  "success": true,
  "message": "Connection successful",
  "token_obtained": true,
  "version": "2.1.3-polling-timeout-fix",  ‚Üê –í–ê–ñ–ù–û!
  "build_date": "2025-12-18"
}
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é (—ç—Ç–æ –∑–∞–π–º—ë—Ç ~3-4 –º–∏–Ω—É—Ç—ã)

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ **3.5 –º–∏–Ω—É—Ç** –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç—á—ë—Ç–æ–≤!

1. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞ 7 –¥–Ω–µ–π"**
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Network ‚Üí sync-ozon-performance
3. **–û–∂–∏–¥–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –≤–∫–ª–∞–¥–∫—É!)

**–û–∂–∏–¥–∞–µ–º—ã–π —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Synchronization completed",
  "period": { "from": "2025-12-11", "to": "2025-12-18" },
  "campaigns": 30,
  "chunks_processed": 3,
  "inserted": 210,
  "sync_id": "...",
  "version": "2.1.3-polling-timeout-fix",
  "build_date": "2025-12-18"
}
```

**–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```json
{
  "error": "Report polling failed",
  "details": "Timeout after 10 attempts"  ‚ùå
}
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase Logs

–û—Ç–∫—Ä–æ–π—Ç–µ Supabase ‚Üí Functions ‚Üí sync-ozon-performance ‚Üí Logs

**–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**
```
Report UUID: 0f6db8f9-b71c-4759-93c3-a3a34d6e6ff0
Polling attempt 1/40 for UUID 0f6db8f9-...
UUID 0f6db8f9-... status: NOT_STARTED
Polling attempt 2/40 for UUID 0f6db8f9-...
UUID 0f6db8f9-... status: IN_PROGRESS
Polling attempt 3/40 for UUID 0f6db8f9-...
UUID 0f6db8f9-... status: IN_PROGRESS
...
Polling attempt 8/40 for UUID 0f6db8f9-...
UUID 0f6db8f9-... status: OK
Report ready! Link: https://...
Report is a ZIP archive, extracting in-memory...
Found CSV file in ZIP: report.csv
Extracted CSV, length: 45678 bytes
Parsed 210 rows from CSV for campaign Campaign Name
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: –¥–æ 40 (–Ω–µ –¥–æ 10 –∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- ‚úÖ Status –º–µ–Ω—è–µ—Ç—Å—è: NOT_STARTED ‚Üí IN_PROGRESS ‚Üí OK
- ‚úÖ ZIP –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ CSV –ø–∞—Ä—Å–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
SELECT
  stat_date,
  sku,
  campaign_id,
  campaign_name,
  campaign_type,
  money_spent,
  views,
  clicks,
  add_to_cart,
  orders,
  revenue,
  imported_at
FROM ozon_performance_daily
WHERE marketplace_id = '8d51d87d-a75d-487a-9b8d-29458183f182'
  AND stat_date >= CURRENT_DATE - INTERVAL '7 days'
ORDER BY imported_at DESC
LIMIT 50;
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- ‚úÖ –ó–∞–ø–∏—Å–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç (imported_at)
- ‚úÖ campaign_id –∑–∞–ø–æ–ª–Ω–µ–Ω (–Ω–µ NULL)
- ‚úÖ add_to_cart —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ –ï—Å—Ç—å –∑–∞–ø–∏—Å–∏ –ø–æ –≤—Å–µ–º 30+ –∫–∞–º–ø–∞–Ω–∏—è–º

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤

| –í–µ—Ä—Å–∏—è | maxAttempts | initialDelay | pollInterval | **–û–±—â–∏–π —Ç–∞–π–º–∞—É—Ç** | –°—Ç–∞—Ç—É—Å |
|--------|-------------|--------------|--------------|-------------------|--------|
| v2.1.2 | 10 | 5s | 3s | **35 —Å–µ–∫—É–Ω–¥** | ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |
| **v2.1.3** | **40** | **10s** | **5s** | **~210 —Å–µ–∫—É–Ω–¥ (3.5 –º–∏–Ω)** | **‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ** |

**–†–∞—Å—á—ë—Ç:**
- v2.1.2: `5 + (10 √ó 3) = 35 —Å–µ–∫—É–Ω–¥`
- v2.1.3: `10 + (40 √ó 5) = 210 —Å–µ–∫—É–Ω–¥ = 3.5 –º–∏–Ω—É—Ç—ã`

**–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ OZON:**
- 1-5 –∫–∞–º–ø–∞–Ω–∏–π: ~20-30 —Å–µ–∫—É–Ω–¥
- 10-20 –∫–∞–º–ø–∞–Ω–∏–π: ~60-90 —Å–µ–∫—É–Ω–¥
- 30+ –∫–∞–º–ø–∞–Ω–∏–π: ~120-180 —Å–µ–∫—É–Ω–¥ (2-3 –º–∏–Ω—É—Ç—ã)

---

## üîç –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v2.1.2 ‚Üí v2.1.3

**v2.1.2-bugfix-integer-types:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ Integer —Ç–∏–ø—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (add_to_cart)
- ‚ùå –¢–∞–π–º–∞—É—Ç polling —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π (35s)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—à–∏–±–∫–∞ "Timeout after 10 attempts"

**v2.1.3-polling-timeout-fix:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ Integer —Ç–∏–ø—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –¢–∞–π–º–∞—É—Ç polling —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 3.5 –º–∏–Ω—É—Ç
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Ç—á—ë—Ç—ã —É—Å–ø–µ—à–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è "–ó–∞ 7 –¥–Ω–µ–π" —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –¥–æ 3-4 –º–∏–Ω—É—Ç!**

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç—á—ë—Ç–æ–≤ (30+ –∫–∞–º–ø–∞–Ω–∏–π). –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å!

### 2. –°—É–º–º–∞—Ä–Ω–æ–µ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ —É –≤–∞—Å 30 –∫–∞–º–ø–∞–Ω–∏–π –∏ –ª–∏–º–∏—Ç OZON = 10 –∫–∞–º–ø–∞–Ω–∏–π –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ:

```
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ chunks = ceil(30 / 10) = 3
–í—Ä–µ–º—è –Ω–∞ 1 chunk = ~2-3 –º–∏–Ω—É—Ç—ã
–û–±—â–µ–µ –≤—Ä–µ–º—è = 3 √ó 3 –º–∏–Ω—É—Ç—ã = ~9 –º–∏–Ω—É—Ç
```

‚ö†Ô∏è **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –Ω–µ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ:**
- Frontend (fetch timeout)
- Nginx/Proxy (–µ—Å–ª–∏ –µ—Å—Ç—å)
- Supabase Edge Function (–º–∞–∫—Å 60 —Å–µ–∫—É–Ω–¥? –ü—Ä–æ–≤–µ—Ä–∏—Ç—å!)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ Supabase

–ï—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å—ë –µ—â—ë –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è, –≤–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç Supabase Edge Functions.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Supabase:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
- Request timeout

–ï—Å–ª–∏ –µ—Å—Ç—å –ª–∏–º–∏—Ç 60 —Å–µ–∫—É–Ω–¥, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –Ω–∞:
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É (webhook callback)
- –ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å chunk size (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–µ–Ω—å—à–µ –∫–∞–º–ø–∞–Ω–∏–π –∑–∞ —Ä–∞–∑)

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –ö–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –≤ Supabase Edge Functions
- [ ] –í–µ—Ä—Å–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `2.1.3-polling-timeout-fix`
- [ ] –°—Ç—Ä–æ–∫–∏ 66-68: `maxAttempts = 40, initialDelay = 10000, pollInterval = 5000`
- [ ] –°—Ç—Ä–æ–∫–∞ 529: `await pollReportStatus(uuid, accessToken)` –±–µ–∑ —è–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ—Ä—Å–∏—é 2.1.3
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è "–ó–∞ 7 –¥–Ω–µ–π" —Ä–∞–±–æ—Ç–∞–µ—Ç (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 3-4 –º–∏–Ω—É—Ç—ã)
- [ ] –í Supabase Logs –≤–∏–¥–Ω—ã –ø–æ–ø—ã—Ç–∫–∏ polling (–¥–æ 40)
- [ ] –í –ë–î –ø–æ—è–≤–∏–ª–∏—Å—å —Å–≤–µ–∂–∏–µ –∑–∞–ø–∏—Å–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
- [ ] campaign_id –∑–∞–ø–æ–ª–Ω–µ–Ω –≤–æ –≤—Å–µ—Ö –∑–∞–ø–∏—Å—è—Ö
- [ ] add_to_cart —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
- [ ] –ù–µ—Ç –æ—à–∏–±–∫–∏ "Timeout after 10 attempts"

---

## üìù Commit

**–í–µ—Ç–∫–∞:**
```
claude/ozon-performance-zip-support-hN0XE
```

**Commit:**
```
968de40 - Fix polling timeout for large reports in OZON Performance API v2.1.3
```

**GitHub:**
```
https://github.com/Alex1604788/standalone-spark/tree/claude/ozon-performance-zip-support-hN0XE
```

---

## üéØ –ò—Ç–æ–≥–æ

**–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v2.1.3:**
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç polling —Å 35 —Å–µ–∫—É–Ω–¥ –¥–æ 3.5 –º–∏–Ω—É—Ç
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤ –ø–æ 30+ –∫–∞–º–ø–∞–Ω–∏—è–º
- ‚úÖ OZON —É—Å–ø–µ–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã! –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é "–ó–∞ 7 –¥–Ω–µ–π" –∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ 3-4 –º–∏–Ω—É—Ç—ã –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
