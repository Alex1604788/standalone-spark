# üßπ –£–¢–í–ï–†–ñ–î–ï–ù–ù–´–ï –ü–†–ê–í–ò–õ–ê –û–ß–ò–°–¢–ö–ò –õ–û–ì–û–í

**–î–∞—Ç–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:** 2026-01-25
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

---

## üìä –£–¢–í–ï–†–ñ–î–ï–ù–ù–ê–Ø –ü–û–õ–ò–¢–ò–ö–ê –•–†–ê–ù–ï–ù–ò–Ø

–í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ CRON –∑–∞–¥–∞—á–∏.

| ‚Ññ | –¢–∞–±–ª–∏—Ü–∞ | –ü–µ—Ä–∏–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è | CRON —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|---------|-----------------|-----------------|--------|
| 1 | `ai_reply_history` | 30 –¥–Ω–µ–π | –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 04:00 UTC | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ |
| 2 | `logs_ai` | 7 –¥–Ω–µ–π | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 05:00 UTC | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ |
| 3 | `import_logs` | 7 –¥–Ω–µ–π | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 05:30 UTC | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ |
| 4 | `ozon_sync_history` | 30 –¥–Ω–µ–π | –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 06:00 UTC | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ |
| 5 | `cron.job_run_details` | 7 –¥–Ω–µ–π | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 06:00 UTC | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ |
| 6 | `fallback_action_logs` | 7 –¥–Ω–µ–π | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 06:30 UTC | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ |
| 7 | `consent_logs` | –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 07:00 UTC | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ |

---

## üìù –û–ü–ò–°–ê–ù–ò–ï –ü–†–ê–í–ò–õ

### 1. ai_reply_history (30 –¥–Ω–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π AI –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ –∏ –≤–æ–ø—Ä–æ—Å–æ–≤.

**–ü—Ä–∞–≤–∏–ª–æ:**
- –•—Ä–∞–Ω–∏—Ç—å: 30 –¥–Ω–µ–π
- –ü—Ä–∏—á–∏–Ω–∞: –ù—É–∂–Ω–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π AI –æ—Ç–≤–µ—Ç–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –§—É–Ω–∫—Ü–∏—è: `public.cleanup_ai_reply_history()`
- CRON: `cleanup-ai-reply-history-weekly`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 04:00 UTC
- –ë–∞—Ç—á-—Ä–∞–∑–º–µ—Ä: 10,000 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 500,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `20260125120000_cleanup_ai_reply_history.sql`

---

### 2. logs_ai (7 –¥–Ω–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI –æ—Ç–≤–µ—Ç–æ–≤.

**–ü—Ä–∞–≤–∏–ª–æ:**
- –•—Ä–∞–Ω–∏—Ç—å: 7 –¥–Ω–µ–π
- –ü—Ä–∏—á–∏–Ω–∞: –û—à–∏–±–∫–∏ AI –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –§—É–Ω–∫—Ü–∏—è: `public.cleanup_logs_ai()`
- CRON: `cleanup-logs-ai-daily`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 05:00 UTC
- –ë–∞—Ç—á-—Ä–∞–∑–º–µ—Ä: 10,000 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 1,000,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `20260125120100_cleanup_logs_ai.sql`

---

### 3. import_logs (7 –¥–Ω–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏ –∏–º–ø–æ—Ä—Ç–∞ —Ñ–∞–π–ª–æ–≤ (accruals, storage_costs, etc.).

**–ü—Ä–∞–≤–∏–ª–æ:**
- –•—Ä–∞–Ω–∏—Ç—å: 7 –¥–Ω–µ–π
- –ü—Ä–∏—á–∏–Ω–∞: –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–µ–¥–∞–≤–Ω–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –§—É–Ω–∫—Ü–∏—è: `public.cleanup_import_logs()`
- CRON: `cleanup-import-logs-daily`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 05:30 UTC
- –ë–∞—Ç—á-—Ä–∞–∑–º–µ—Ä: 5,000 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 250,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `20260125120200_cleanup_import_logs.sql`

---

### 4. ozon_sync_history (30 –¥–Ω–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò—Å—Ç–æ—Ä–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π —Å OZON Performance API.

**–ü—Ä–∞–≤–∏–ª–æ:**
- –•—Ä–∞–Ω–∏—Ç—å: 30 –¥–Ω–µ–π
- –ü—Ä–∏—á–∏–Ω–∞: –ù—É–∂–Ω–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞ –º–µ—Å—è—Ü

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –§—É–Ω–∫—Ü–∏—è: `public.cleanup_ozon_sync_history()`
- CRON: `cleanup-ozon-sync-history-weekly`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 06:00 UTC
- –ë–∞—Ç—á-—Ä–∞–∑–º–µ—Ä: 5,000 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 250,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `20260125120300_cleanup_ozon_sync_history.sql`

**–î–µ—Ç–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—ã:**
- –•—Ä–∞–Ω–∏—Ç: –¥–∞—Ç—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Å—Ç–∞—Ç—É—Å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –¢–∏–ø—ã –∑–∞–ø—É—Å–∫–∞: manual, cron_daily, cron_weekly, api
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏ OZON API

---

### 5. cron.job_run_details (7 –¥–Ω–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ pg_cron —Å –ª–æ–≥–∞–º–∏ –≤—Å–µ—Ö CRON –∑–∞–¥–∞—á.

**–ü—Ä–∞–≤–∏–ª–æ:**
- –•—Ä–∞–Ω–∏—Ç—å: 7 –¥–Ω–µ–π
- –ü—Ä–∏—á–∏–Ω–∞: CRON –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–∞—Å—Ç–æ, —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –Ω–µ –Ω—É–∂–Ω—ã

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –§—É–Ω–∫—Ü–∏—è: `public.cleanup_cron_job_run_details()`
- CRON: `cleanup-cron-job-run-details-daily`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 06:00 UTC
- –ë–∞—Ç—á-—Ä–∞–∑–º–µ—Ä: 10,000 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 1,000,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `20260125120400_cleanup_cron_job_run_details.sql`

**–í–∞–∂–Ω–æ:** –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å ~59 MB –∏–∑-–∑–∞ —á–∞—Å—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

---

### 6. fallback_action_logs (7 –¥–Ω–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏ fallback –¥–µ–π—Å—Ç–≤–∏–π (browser extension, headful bot).

**–ü—Ä–∞–≤–∏–ª–æ:**
- –•—Ä–∞–Ω–∏—Ç—å: 7 –¥–Ω–µ–π
- –ü—Ä–∏—á–∏–Ω–∞: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏, –Ω–µ —Ç—Ä–µ–±—É—é—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –§—É–Ω–∫—Ü–∏—è: `public.cleanup_fallback_action_logs()`
- CRON: `cleanup-fallback-action-logs-daily`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 06:30 UTC
- –ë–∞—Ç—á-—Ä–∞–∑–º–µ—Ä: 5,000 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 250,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `20260125120500_cleanup_fallback_action_logs.sql`

---

### 7. consent_logs (–ù–ï –•–†–ê–ù–ò–¢–¨)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏ —Å–æ–≥–ª–∞—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).

**–ü—Ä–∞–≤–∏–ª–æ:**
- –•—Ä–∞–Ω–∏—Ç—å: 0 –¥–Ω–µ–π (—É–¥–∞–ª—è—Ç—å –≤—Å–µ)
- –ü—Ä–∏—á–∏–Ω–∞: –¢–∞–±–ª–∏—Ü–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –§—É–Ω–∫—Ü–∏—è: `public.cleanup_consent_logs()`
- CRON: `cleanup-consent-logs-daily`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 07:00 UTC
- –ë–∞—Ç—á-—Ä–∞–∑–º–µ—Ä: 5,000 –∑–∞–ø–∏—Å–µ–π
- –ú–∞–∫—Å–∏–º—É–º: 500,000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `20260125120600_cleanup_consent_logs.sql`

**–í–∞–∂–Ω–æ:** –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª—è–µ—Ç –í–°–ï –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –¥–∞—Ç—ã.

---

## üìã –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ú–ò–ì–†–ê–¶–ò–ô

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
ls -la supabase/migrations/20260125120*.sql
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
- `20260125120000_cleanup_ai_reply_history.sql`
- `20260125120100_cleanup_logs_ai.sql`
- `20260125120200_cleanup_import_logs.sql`
- `20260125120300_cleanup_ozon_sync_history.sql`
- `20260125120400_cleanup_cron_job_run_details.sql`
- `20260125120500_cleanup_fallback_action_logs.sql`
- `20260125120600_cleanup_consent_logs.sql`

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
supabase db push

# –ò–ª–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —á–µ—Ä–µ–∑ Supabase CLI
supabase db push --linked
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ CRON –∑–∞–¥–∞—á

```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ CRON –∑–∞–¥–∞—á–∏
SELECT
  jobname,
  schedule,
  active,
  jobid
FROM cron.job
WHERE jobname LIKE 'cleanup-%'
ORDER BY jobname;
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:
- `cleanup-ai-reply-history-weekly`
- `cleanup-logs-ai-daily`
- `cleanup-import-logs-daily`
- `cleanup-ozon-sync-history-weekly`
- `cleanup-cron-job-run-details-daily`
- `cleanup-fallback-action-logs-daily`
- `cleanup-consent-logs-daily`

### –®–∞–≥ 4: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```sql
-- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—É—é —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏
SELECT * FROM public.cleanup_logs_ai();
SELECT * FROM public.cleanup_import_logs();
SELECT * FROM public.cleanup_ozon_sync_history();
-- –∏ —Ç.–¥.
```

---

## üîß –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü

```sql
SELECT
  schemaname,
  tablename,
  pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
  AND tablename IN (
    'ai_reply_history',
    'logs_ai',
    'import_logs',
    'ozon_sync_history',
    'fallback_action_logs',
    'consent_logs'
  )
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è CRON

```sql
SELECT
  j.jobname,
  d.status,
  d.start_time,
  d.end_time,
  d.return_message
FROM cron.job j
LEFT JOIN cron.job_run_details d ON j.jobid = d.jobid
WHERE j.jobname LIKE 'cleanup-%'
  AND d.end_time IS NOT NULL
ORDER BY d.end_time DESC
LIMIT 20;
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ CRON –∑–∞–¥–∞—á–∏ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

```sql
-- –û—Ç–∫–ª—é—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É
SELECT cron.unschedule('cleanup-logs-ai-daily');

-- –°–Ω–æ–≤–∞ –≤–∫–ª—é—á–∏—Ç—å
SELECT cron.schedule(
  'cleanup-logs-ai-daily',
  '0 5 * * *',
  $$ SELECT public.cleanup_logs_ai(); $$
);
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### 1. –ë–∞—Ç—á-—É–¥–∞–ª–µ–Ω–∏–µ

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∞—Ç—á-—É–¥–∞–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è timeout:
- –£–¥–∞–ª—è—é—Ç –Ω–µ–±–æ–ª—å—à–∏–º–∏ –ø–æ—Ä—Ü–∏—è–º–∏ (5,000 - 10,000 –∑–∞–ø–∏—Å–µ–π)
- –î–µ–ª–∞—é—Ç –ø–∞—É–∑—É –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏ (0.1 —Å–µ–∫)
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ç—á–µ–π –∑–∞ —Ä–∞–∑

### 2. ANALYZE –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ > 1,000 –∑–∞–ø–∏—Å–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ANALYZE –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π, –ø–æ—ç—Ç–æ–º—É –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### 4. –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ CRON

–ó–∞–¥–∞—á–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏:
- 04:00 UTC - ai_reply_history (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- 05:00 UTC - logs_ai (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- 05:30 UTC - import_logs (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- 06:00 UTC - ozon_sync_history (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ), cron.job_run_details (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- 06:30 UTC - fallback_action_logs (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- 07:00 UTC - consent_logs (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç –∏–Ω–¥–µ–∫—Å—ã –ø–æ `created_at` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –ø–æ–ª—è–º):
- `ai_reply_history.created_at`
- `logs_ai.created_at`
- `import_logs.created_at`
- `ozon_sync_history.started_at`
- `cron.job_run_details.end_time`
- `fallback_action_logs.created_at`
- `consent_logs.created_at`

### –û—Ü–µ–Ω–∫–∞ —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞

–ü–æ—Å–ª–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è:
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ë–î –Ω–∞ 20-30%
- –°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü —Å –ª–æ–≥–∞–º–∏
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ:** Claude Code
**–î–∞—Ç–∞:** 2026-01-25
**–í–µ—Ä—Å–∏—è:** 2.0 (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)
