# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–°–æ–∑–¥–∞–Ω–∞ Edge Function** `auto-generate-drafts-cron`
   - –ü—É—Ç—å: `supabase/functions/auto-generate-drafts-cron/index.ts`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã
   - –í—ã–∑—ã–≤–∞–µ—Ç `auto-generate-drafts` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

2. **–°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è** –¥–ª—è cron job
   - –§–∞–π–ª: `supabase/migrations/20251209_add_auto_generate_drafts_cron.sql`
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   - –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase

–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞:
`supabase/migrations/20251209_add_auto_generate_drafts_cron.sql`

–ò–ª–∏ —á–µ—Ä–µ–∑ CLI:
```bash
supabase db push
```

### 2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Edge Function

```bash
supabase functions deploy auto-generate-drafts-cron --no-verify-jwt
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ cron job —Ä–∞–±–æ—Ç–∞–µ—Ç

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SQL Editor:
```sql
SELECT * FROM cron.job WHERE jobname = 'auto-generate-drafts-cron';
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º `*/5 * * * *` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç).

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–í Supabase Dashboard ‚Üí Edge Functions ‚Üí `auto-generate-drafts-cron` ‚Üí Logs
–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ü–µ—Å—Å–µ.

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Edge Function** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `replies`** - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `scheduled` –∏–ª–∏ `drafted`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—á–µ—Ç—á–∏–∫–∏** –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ - –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5 –º–∏–Ω—É—Ç), –∏–∑–º–µ–Ω–∏—Ç–µ –≤ –º–∏–≥—Ä–∞—Ü–∏–∏:
- `*/5 * * * *` - –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- `*/10 * * * *` - –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- `*/1 * * * *` - –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –º–æ–∂–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É)



