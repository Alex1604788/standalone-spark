<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      width:320px;
      padding:16px;
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      font-size:14px;
      line-height:1.5;
      color:#1a1a1a;
    }
    .header {
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:16px;
      padding-bottom:16px;
      border-bottom:1px solid #e5e5e5;
    }
    .logo {
      width:32px;
      height:32px;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      border-radius:8px;
    }
    h1 { font-size:16px; font-weight:600; }

    .status {
      padding:12px;
      border-radius:8px;
      margin-bottom:16px;
      background:#f3f4f6;
      font-size:13px;
    }
    .status.active {
      background:#d1fae5;
      color:#065f46;
    }
    .status.needs-login {
      background:#fef3c7;
      color:#92400e;
    }
    .status.error {
      background:#fee2e2;
      color:#991b1b;
    }

    .row {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
      font-size:13px;
    }
    .row-label { color:#6b7280; }
    .row-value { font-weight:500; }

    .controls {
      display:flex;
      flex-direction:column;
      gap:8px;
      margin:16px 0;
    }
    button {
      width:100%;
      padding:10px 16px;
      background:#667eea;
      color:#fff;
      border:none;
      border-radius:8px;
      font-size:14px;
      font-weight:500;
      cursor:pointer;
      transition:background .2s;
    }
    button:hover { background:#5568d3; }
    button:disabled { background:#ccc; cursor:not-allowed; }
    .hidden { display:none; }

    .auto-scan-toggle {
      display:flex;
      align-items:center;
      gap:8px;
      padding:12px;
      background:#f9fafb;
      border-radius:8px;
      margin:12px 0;
    }
    .auto-scan-toggle label {
      flex:1;
      font-size:13px;
      cursor:pointer;
    }
    input[type="checkbox"] {
      width:20px;
      height:20px;
      cursor:pointer;
    }

    .hint {
      padding:10px;
      background:#eff6ff;
      border-radius:6px;
      font-size:11px;
      color:#1e40af;
      line-height:1.4;
    }
    .hint-small {
      font-size:10px;
      color:#6b7280;
      margin-top:4px;
    }

    .connection-form {
      margin:16px 0;
      padding:16px;
      background:#f8f9fa;
      border-radius:8px;
    }
    .connection-form.hidden { display:none; }

    .form-group { margin-bottom:12px; }
    .form-group label {
      display:block;
      font-size:13px;
      font-weight:500;
      margin-bottom:4px;
      color:#2d3748;
    }
    .form-group input {
      width:100%;
      padding:8px 12px;
      border:1px solid #cbd5e0;
      border-radius:4px;
      font-size:13px;
      box-sizing:border-box;
    }
    .form-group input:focus {
      outline:none;
      border-color:#4299e1;
      box-shadow:0 0 0 3px rgba(66,153,225,.1);
    }

    .info-grid { margin:16px 0; }
    .info-grid.hidden { display:none; }

    .footer {
      margin-top:16px;
      padding-top:16px;
      border-top:1px solid #e5e5e5;
      text-align:center;
      font-size:12px;
      color:#6b7280;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo"></div>
    <h1>–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç</h1>
  </div>
  
  <div id="statusBox" class="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  
  <!-- –§–æ—Ä–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
  <div id="connectionForm" class="connection-form">
    <div class="form-group">
      <label for="emailInput">–õ–æ–≥–∏–Ω –≤ Ozon (email):</label>
      <input type="email" id="emailInput" placeholder="user@ozon.ru">
    </div>

    <div class="form-group">
      <label for="sellerIdInput">Seller ID (–∫–∞–±–∏–Ω–µ—Ç Ozon):</label>
      <input type="text" id="sellerIdInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 123456">
    </div>

    <div class="form-group">
      <label for="marketplaceIdInput">ID –º–∞–≥–∞–∑–∏–Ω–∞ –∏–∑ –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç:</label>
      <input type="text" id="marketplaceIdInput" placeholder="–í–∫–ª–∞–¥–∫–∞ ¬´–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã¬ª ‚Üí –í–∞—à –º–∞–≥–∞–∑–∏–Ω ‚Üí ID">
      <div class="hint-small">
        –≠—Ç–æ –Ω—É–∂–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏ –º–∞–≥–∞–∑–∏–Ω.
        <a href="https://app.auto-otvet.ru/app/marketplaces" target="_blank" rel="noopener noreferrer" style="color:#667eea;text-decoration:underline;margin-left:4px;">–û—Ç–∫—Ä—ã—Ç—å –≤ –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç</a>
      </div>
    </div>

    <button id="saveConnection" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å</button>
  </div>
  
  <!-- –ë–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
  <div id="accountInfo" class="info-grid hidden">
    <div class="row">
      <span class="row-label">Email:</span>
      <strong id="email" class="row-value">‚Äî</strong>
    </div>

    <div class="row">
      <span class="row-label">–†–µ–∂–∏–º:</span>
      <strong id="mode" class="row-value">–í—ã–∫–ª</strong>
    </div>

    <div class="row">
      <span class="row-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–∫–∞–Ω:</span>
      <strong id="lastScan" class="row-value">‚Äî</strong>
    </div>

    <div class="row">
      <span class="row-label">–ù–∞–π–¥–µ–Ω–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∫–∞–Ω:</span>
      <strong id="count" class="row-value">0</strong>
    </div>

    <div class="controls" style="margin-top:16px;">
      <button id="disconnect" class="btn">–°–º–µ–Ω–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω</button>
    </div>
  </div>
  
  <div class="auto-scan-toggle">
    <label for="autoScan">ü§ñ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</label>
    <input type="checkbox" id="autoScan" />
  </div>
  
  <div class="controls">
    <button id="scanNow" class="secondary">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å</button>
    <button id="fullSync" class="secondary">–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
  </div>
  
  <div id="hint" class="hint"></div>
  
  <div class="footer">
    ¬© 2025 –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç<br/>
    –í–µ—Ä—Å–∏—è 2.0.0
  </div>
  
  <script src="popup.js"></script>
</body>
</html>
