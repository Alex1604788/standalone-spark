# üîç –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!
–§–∞–π–ª `DATABASE_SIZE_DIAGNOSTIC.sql` —Å–ª–∏—à–∫–æ–º —Ç—è–∂–µ–ª—ã–π –∏ –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å —Å —Ç–∞–π–º–∞—É—Ç–æ–º.
–í–º–µ—Å—Ç–æ –Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–ª–µ–≥–∫–∏–µ SQL —Ñ–∞–π–ª—ã** –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥: –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ñ–∞–π–ª—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏

### –®–ê–ì 1: –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –≤ Supabase

–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://supabase.com/dashboard/project/bkmicyguzlwampuindff/sql/new
```

### –®–ê–ì 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏

–ö–æ–ø–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ—Ç–¥–µ–ª—å–Ω–æ:

#### 1Ô∏è‚É£ **QUICK_SIZE_CHECK.sql** - –ù–ê–ß–ù–ò–¢–ï –° –≠–¢–û–ì–û!
–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ë–î (10 —Å–µ–∫):
- –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã
- –¢–û–ü-10 —Å–∞–º—ã—Ö –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- –¢–û–ü-5 —Å–∞–º—ã—Ö –±–æ–ª—å—à–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

#### 2Ô∏è‚É£ **TABLE_ROW_COUNTS.sql**
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ (5 —Å–µ–∫)

#### 3Ô∏è‚É£ **CHECK_DUPLICATES.sql**
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ, ~30 —Å–µ–∫)

#### 4Ô∏è‚É£ **CHECK_OLD_DATA.sql**
–°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ (20 —Å–µ–∫)

#### 5Ô∏è‚É£ **CHECK_DEAD_TUPLES.sql**
–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω—É–∂–µ–Ω –ª–∏ VACUUM (5 —Å–µ–∫)

### –®–ê–ì 3: –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor

1. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **RUN** (–∏–ª–∏ Ctrl+Enter)
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
4. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ñ–∞–π–ª—É

### –®–ê–ì 4: –ò–∑—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

SQL —Ñ–∞–π–ª –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

#### üìä –®–ê–ì 1: –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–ü–æ–∫–∞–∂–µ—Ç —Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—è –ë–î

#### üìä –®–ê–ì 2: –†–∞–∑–º–µ—Ä –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
–¢–∞–±–ª–∏—Ü—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É (–æ—Ç –±–æ–ª—å—à–µ–π –∫ –º–µ–Ω—å—à–µ–π)

#### üìä –®–ê–ì 3: –†–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–æ–≤
–ü–æ–∫–∞–∂–µ—Ç –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∑–∞–Ω–∏–º–∞—é—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –º–µ—Å—Ç–∞

#### üìä –®–ê–ì 4: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏

#### üìä –®–ê–ì 5: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö
–°–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ

#### üìä –®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –î—É–±–ª–∏–∫–∞—Ç—ã –≤ reviews
- –î—É–±–ª–∏–∫–∞—Ç—ã –≤ products
- –î—É–±–ª–∏–∫–∞—Ç—ã –≤ ozon_performance_daily
- –î—É–±–ª–∏–∫–∞—Ç—ã –≤ replies

#### üìä –®–ê–ì 7: –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å:
- logs_ai —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π
- ai_reply_history —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π
- audit_log —Å—Ç–∞—Ä—à–µ 180 –¥–Ω–µ–π
- import_logs —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π
- ozon_sync_history —Å—Ç–∞—Ä—à–µ 90 –¥–Ω–µ–π

#### üìä –®–ê–ì 8: –ê–Ω–∞–ª–∏–∑ TOAST
–†–∞–∑–º–µ—Ä –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π

#### üìä –®–ê–ì 9: –°–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –∑–∞–ø–∏—Å–∏
- –¢–æ–ø 10 —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö review_text
- –¢–æ–ø 10 —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö reply_text
- –¢–æ–ø 10 —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö chat messages

#### üìä –®–ê–ì 10: Dead tuples
–ù–µ—É–¥–∞–ª–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–ø–∏—Å–µ–π (–Ω—É–∂–µ–Ω VACUUM)

#### üìä –®–ê–ì 11: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–∞—Ç–∞–º
–ö–∞–∫ –¥–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –º–µ—Å—è—Ü–∞–º:
- reviews
- ozon_performance_daily
- chat_messages

#### üìä –®–ê–ì 12: –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## üí° –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –≤—ã —É–≤–∏–¥–∏—Ç–µ:

1. **–ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–∞–º—ã–µ –±–æ–ª—å—à–∏–µ** - —Å—Ñ–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –Ω–∏—Ö
2. **–ï—Å—Ç—å –ª–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã** - –µ—Å–ª–∏ –µ—Å—Ç—å, –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
3. **–°–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤** - –º–æ–∂–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å
4. **–ï—Å—Ç—å –ª–∏ dead tuples** - –Ω—É–∂–µ–Ω VACUUM
5. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏** - –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö

---

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ psql

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω psql:

\`\`\`bash
psql "postgresql://postgres.bkmicyguzlwampuindff:SparkOzonIntegration2025!@aws-0-eu-central-1.pooler.supabase.com:6543/postgres" -f DATABASE_SIZE_DIAGNOSTIC.sql
\`\`\`

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
