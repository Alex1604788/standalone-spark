# üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Sales Analytics

**–í–µ—Ç–∫–∞:** `claude/ozon-performance-zip-support-hN0XE`
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é ‚úÖ

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

### 1. ‚úÖ **–ó–∞–¥–µ–ø–ª–æ–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥**

–ö–Ω–æ–ø–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: "–ó–∞ 7 –¥–Ω–µ–π" –∏ "–ó–∞ 62 –¥–Ω—è"

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
- –°–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å –≤–µ—Ç–∫–∏ `claude/ozon-performance-zip-support-hN0XE`
- –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å

### 2. ‚úÖ **–í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é**

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `get_sales_analytics()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OZON Performance API

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å Supabase SQL Editor
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å **–≤–µ—Å—å –∫–æ–¥** –∏–∑ —Ñ–∞–π–ª–∞:
   ```
   supabase/migrations/20251220_update_sales_analytics_for_performance_api.sql
   ```
3. –í—Å—Ç–∞–≤–∏—Ç—å –≤ SQL Editor
4. –ù–∞–∂–∞—Ç—å **Run** (Ctrl+Enter)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Success. No rows returned
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### 3. ‚è≥ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å**

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å Supabase SQL Editor
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏–∑ —Ñ–∞–π–ª–∞:
   ```
   CHECK_DATA_STATUS.sql
   ```
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏
4. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º:**
- ‚úÖ ozon_performance_daily (1611 –∑–∞–ø–∏—Å–µ–π –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å)
- ‚ùì ozon_accruals (–Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –û–ó–û–ù - –Ω—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å?)
- ‚ùì storage_costs (—Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è - –Ω—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å?)
- ‚ùì product_business_data (–∑–∞–∫—É–ø–æ—á–Ω—ã–µ —Ü–µ–Ω—ã - –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å?)

---

## üìä –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### 4. **–ò–º–ø–æ—Ä—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –û–ó–û–ù** (–µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è)

**–û—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å:**
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç OZON ‚Üí –§–∏–Ω–∞–Ω—Å—ã ‚Üí –ù–∞—á–∏—Å–ª–µ–Ω–∏—è
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel –∑–∞ –Ω—É–∂–Ω—ã–π –ø–µ—Ä–∏–æ–¥

**–ö–∞–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:**
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí **–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**
2. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø: **–ù–∞—á–∏—Å–ª–µ–Ω–∏—è –û–ó–û–ù**
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å Excel —Ñ–∞–π–ª
4. –£–∫–∞–∑–∞—Ç—å –ø–µ—Ä–∏–æ–¥
5. –ù–∞–∂–∞—Ç—å **–ù–∞—á–∞—Ç—å –∏–º–ø–æ—Ä—Ç**

**–û–∂–∏–¥–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ Excel:**
- –î–∞—Ç–∞
- –ê—Ä—Ç–∏–∫—É–ª (offer_id)
- SKU (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –¢–∏–ø –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –ó–∞ –ø—Ä–æ–¥–∞–∂—É –¥–æ –≤—ã—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–π
- –ò—Ç–æ–≥–æ

### 5. **–ò–º–ø–æ—Ä—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è** (–µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è)

**–û—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å:**
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç OZON ‚Üí –§–∏–Ω–∞–Ω—Å—ã ‚Üí –•—Ä–∞–Ω–µ–Ω–∏–µ
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel –∑–∞ –Ω—É–∂–Ω—ã–π –ø–µ—Ä–∏–æ–¥

**–ö–∞–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:**
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí **–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**
2. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø: **–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è**
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å Excel —Ñ–∞–π–ª
4. –£–∫–∞–∑–∞—Ç—å –ø–µ—Ä–∏–æ–¥
5. –ù–∞–∂–∞—Ç—å **–ù–∞—á–∞—Ç—å –∏–º–ø–æ—Ä—Ç**

**–û–∂–∏–¥–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ Excel:**
- –î–∞—Ç–∞
- –ê—Ä—Ç–∏–∫—É–ª
- SKU (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
- –ö–æ–ª-–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ (–æ—Å—Ç–∞—Ç–æ–∫)

### 6. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å –∑–∞–∫—É–ø–æ—á–Ω—ã–µ —Ü–µ–Ω—ã**

**–ö–∞–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤** (Product Settings)
2. –í—ã–±—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ **–ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

**–ò–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Excel:**
- –°–æ–∑–¥–∞—Ç—å Excel —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: –ê—Ä—Ç–∏–∫—É–ª, –ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ ImportData (–µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –µ—Å—Ç—å)

### 7. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é Performance API –∑–∞ 62 –¥–Ω—è**

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ API OZON**
2. –†–∞–∑–¥–µ–ª **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è**
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **–ó–∞ 62 –¥–Ω—è**
4. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (2-5 –º–∏–Ω—É—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: ~300-500 –∑–∞–ø–∏—Å–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–ø–∞–Ω–∏–π)
- –ü–µ—Ä–∏–æ–¥: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 62 –¥–Ω—è
- –î–∞–Ω–Ω—ã–µ: money_spent, views, clicks, orders

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 8. **–û—Ç–∫—Ä—ã—Ç—å Sales Analytics Dashboard**

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ü—Ä–æ–¥–∞–∂**
2. –í—ã–±—Ä–∞—Ç—å –¥–≤–∞ –ø–µ—Ä–∏–æ–¥–∞:
   - –ü–µ—Ä–∏–æ–¥ 1: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 01.11.2024 –ø–æ 30.11.2024
   - –ü–µ—Ä–∏–æ–¥ 2: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 01.12.2024 –ø–æ 20.12.2024
3. –ù–∞–∂–∞—Ç—å **–ü—Ä–∏–º–µ–Ω–∏—Ç—å**

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è:**
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏:
  - –ü—Ä–æ–¥–∞–∂–∏ (—Ä—É–±)
  - –í–∞–ª–æ–≤–∫–∞ (—Ä—É–±)
  - –ù–∞—Ü–µ–Ω–∫–∞ %
  - –ó–∞—Ç—Ä–∞—Ç—ã (–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ + –†–∞–∑–º–µ—â–µ–Ω–∏–µ + –≠–∫–≤–∞–π—Ä–∏–Ω–≥)
  - –ò—Ç–æ–≥–æ–≤–∞—è –º–∞—Ä–∂–∞ (—Ä—É–±)
  - –ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å %
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
- ‚úÖ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ %)

---

## üéØ –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–æ–≤

**–°–ø—Ä–∞–≤–∫–∞ –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º:**

```
–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å = –ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞ √ó –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö

–í–∞–ª–æ–≤–∫–∞ = –ü—Ä–æ–¥–∞–∂–∏ - –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å

–ù–∞—Ü–µ–Ω–∫–∞ % = (–í–∞–ª–æ–≤–∫–∞ / –ü—Ä–æ–¥–∞–∂–∏) √ó 100

–ó–∞—Ç—Ä–∞—Ç—ã = –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ + –†–∞–∑–º–µ—â–µ–Ω–∏–µ + –≠–∫–≤–∞–π—Ä–∏–Ω–≥

–ò—Ç–æ–≥–æ–≤–∞—è –º–∞—Ä–∂–∞ = –í–∞–ª–æ–≤–∫–∞ - –ó–∞—Ç—Ä–∞—Ç—ã

–ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å % = (–ò—Ç–æ–≥–æ–≤–∞—è –º–∞—Ä–∂–∞ / –ü—Ä–æ–¥–∞–∂–∏) √ó 100
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- **–ü—Ä–æ–¥–∞–∂–∏** ‚Üí ozon_accruals (accrual_type = '–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é')
- **–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ** ‚Üí ozon_performance_daily (money_spent) ‚úÖ –û–ë–ù–û–í–õ–ï–ù–û
- **–†–∞–∑–º–µ—â–µ–Ω–∏–µ** ‚Üí storage_costs (storage_cost)
- **–≠–∫–≤–∞–π—Ä–∏–Ω–≥** ‚Üí ozon_accruals (accrual_type = '–û–ø–ª–∞—Ç–∞ —ç–∫–≤–∞–π—Ä–∏–Ω–≥–∞')
- **–ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞** ‚Üí product_business_data (purchase_price)

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –û–ó–û–ù ‚Üí –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ ImportData
2. ‚ùå –ù–µ –∑–∞–ø—É—â–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Performance API ‚Üí –ó–∞–ø—É—Å—Ç–∏—Ç—å "–ó–∞ 62 –¥–Ω—è"
3. ‚ùå –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ SQL –º–∏–≥—Ä–∞—Ü–∏—è ‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç—å migration —Ñ–∞–π–ª

### –ü—Ä–æ–±–ª–µ–º–∞: "–í–∞–ª–æ–≤–∫–∞ = 0" –∏–ª–∏ "–ú–∞—Ä–∂–∞ –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∑–∞–∫—É–ø–æ—á–Ω—ã–µ —Ü–µ–Ω—ã ‚Üí –ó–∞–ø–æ–ª–Ω–∏—Ç—å —á–µ—Ä–µ–∑ Product Settings
2. ‚ùå offer_id –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ CHECK_DATA_STATUS.sql (–∑–∞–ø—Ä–æ—Å #5)

### –ü—Ä–æ–±–ª–µ–º–∞: "–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ = 0"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ SQL –º–∏–≥—Ä–∞—Ü–∏—è ‚Üí –§—É–Ω–∫—Ü–∏—è –≤—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É promotion_costs
2. ‚ùå –í ozon_performance_daily –ø—É—Å—Ç–æ–π offer_id ‚Üí –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é products —á–µ—Ä–µ–∑ API

---

## üìû –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤ Supabase SQL Editor:**

```sql
-- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å –∏–∑ CHECK_DATA_STATUS.sql (–ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê)
SELECT
  'SUMMARY' as status,
  (SELECT COUNT(*) FROM ozon_performance_daily WHERE marketplace_id = (SELECT id FROM marketplaces WHERE is_active = true LIMIT 1)) as performance_rows,
  (SELECT COUNT(*) FROM ozon_accruals WHERE marketplace_id = (SELECT id FROM marketplaces WHERE is_active = true LIMIT 1)) as accruals_rows,
  (SELECT COUNT(*) FROM storage_costs WHERE marketplace_id = (SELECT id FROM marketplaces WHERE is_active = true LIMIT 1)) as storage_rows,
  (SELECT COUNT(*) FROM product_business_data WHERE marketplace_id = (SELECT id FROM marketplaces WHERE is_active = true LIMIT 1)) as business_data_rows,
  CASE
    WHEN (SELECT COUNT(*) FROM ozon_accruals WHERE marketplace_id = (SELECT id FROM marketplaces WHERE is_active = true LIMIT 1)) > 0 THEN '‚úÖ'
    ELSE '‚ùå –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è'
  END as accruals_status,
  CASE
    WHEN (SELECT COUNT(*) FROM storage_costs WHERE marketplace_id = (SELECT id FROM marketplaces WHERE is_active = true LIMIT 1)) > 0 THEN '‚úÖ'
    ELSE '‚ùå –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è'
  END as storage_status,
  CASE
    WHEN (SELECT COUNT(*) - COUNT(purchase_price) FROM product_business_data WHERE marketplace_id = (SELECT id FROM marketplaces WHERE is_active = true LIMIT 1)) = 0 THEN '‚úÖ'
    ELSE '‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∑–∞–∫—É–ø–æ—á–Ω—ã–µ —Ü–µ–Ω—ã'
  END as prices_status;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã:**
```
performance_rows: >0 (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1611)
accruals_rows: >0
storage_rows: >0
business_data_rows: >0
accruals_status: ‚úÖ
storage_status: ‚úÖ
prices_status: ‚úÖ
```

---

## üìÅ –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

**–ö–æ–¥:**
- SQL –º–∏–≥—Ä–∞—Ü–∏—è: `supabase/migrations/20251220_update_sales_analytics_for_performance_api.sql`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö: `CHECK_DATA_STATUS.sql`
- –î–µ–ø–ª–æ–π –≥–∞–π–¥: `DEPLOY_SALES_ANALYTICS_UPDATE.md`
- Frontend: `src/pages/SalesAnalytics.tsx`
- –§–æ—Ä–º—É–ª—ã: `src/lib/sales-calculations.ts`
- Excel –∏–º–ø–æ—Ä—Ç: `src/pages/ImportData.tsx`

**–í–µ—Ç–∫–∞:**
- `claude/ozon-performance-zip-support-hN0XE`

---

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-12-20
**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é:** ‚úÖ
